<순서>

1. 문제 설정

2. 규칙 기반 분석

3. 그래프 기반 분석

4. 규칙, 그래프 기반 분석


1. 문제 설정
- 시나리오1 특징)저녁형 폭식증 내향적
[저녁형 수면]
대체로 10:00 AM 이후에 일어나고 아침에 알람을 4개씩 맞춘다. 오후 4시 이전에 피로도가 높고 새벽 3시 이후에 잔다. 밤에 혼자 있는 시간에 일에 집중이 잘돼서 10시 이후부터 일을 하기 시작한다. 일하기 전에는 피곤해서 쉰다.
[폭식증 식사]
저녁형 수면이기 때문에 새벽에 배고프다. 배고플 때에는 이성을 잃어서 잠을 못 잔다. 식욕이 강해서 하루 종일 먹을 것을 생각하고 너무 많이 먹어서 구토를 자주한다. 배고픈 것을 못 참아서 음식을 계속 먹고 무엇이든 잘 먹어서 군것질도 자주한다.
[내향적 활동]
내향적인 성격때문에 남들과 오래 같이 있으면 피로감을 느껴서 여가시간을 주로 혼자 보낸다. 혼자 산책하는 것을 즐기고 넓은 인관관계를 불필요하다고 생각해서 친한 친구들과 주로 만난다. 새로운 사람을 만나면 스트레스를 받는다.

그래프를 보면 식사를 서대문구 신촌동과 창천동에서 혼자 먹는 편이고 가끔 노원이와 승연이랑 같이 먹고 식사양은 많은 편이다. 활동도 주로 혼자 하고 실내에서 보낸다. 잠은 신봉동과 노고산동에서 잔다.

- 시나리오2 특징)아침형 폭식증 실내선호
[아침형 수면]
아침형 인간이여서 밤 11시이전에 자서 아침 7시 이전에 깨어난다. 기상 직후 개운한 느낌을 받고 아침에는 피곤함을 느끼지 않는다. 오전 시간에 아침운동을 하고 낮 6시 이후는 피곤함을 느끼기 시작한다.
[폭식증 식사]
식사시간이 10분으로 매우 짧고 운동선수이기 때문에 대부분의 식사를 폭식한다. 배가 고프지 않아도 운동후에는 음식을 챙겨 먹지만 식사후에는 속이 불편해서 후회를 한다. 하루에 간식을 포함해서 4씨 이상 먹는다.
[실내 선호]
실내에서 활동하는 것을 선호해서 여가를 실내에서 즐긴다. 그렇기 때문에 머무르는 장소의 온도와 습도의 변화가 거의 없고 야외 활동시간이 적다. 이동시간을 제외하고는 거의 실내에서 생활한다.
 
식사는 편의점과 식당에서 자주 먹고 친구 윤호와 같이 먹는다. 활동은 주로 혼자 보내거나 윤호와 같이 보내고 TV를 보거나 운동을 한다. 잠은 평일에는 숙소에서 자고 주말에는 집에서 잔다. 

- 시나리오3 특징)
[불면증]
밤 12시이후에 자고 아침 6시 이전에 일어난다. 기상 직후와 업무 시간 중에 카페인을 지속적으로 섭취한다. 업무상 스트레스를 많이 받고 바빠서 하루 운동량이 매우 적다. 잠에 들기 전에 20분 이상 스마트폰을 사용한다. 하루 평균 수면시간이 6시간 미만으로 짧은 편이고 피로가 쌓인 주말에는 기상 취침시간 모두 평일보다 늦다.
[야식증]
아침에는 식욕이 없어서 아침식사를 거르고 점심은 패스트푸드나 배달음식으로 해결한다. 점심은 급하게 먹고 바로 업무로 복귀한다. 저녁은 과식을 하는 편이고 술을 자주 마신다. 저녁을 잘 못 먹으면 집에서 야식을 많이 먹는다.
[외향적]
외향적이지만 업무가 많아 혼자 보내는 시간이 많아 답답함을 느끼기 때문에 저녁에는 다양한 사람들을 만나 저녁식사를 한다. 회식같은 술자리를 즐기고 주도한다. 주말에도 밖에서 사람들과 만나는 것을 선호한다. 그래서 혼자 있으면 우울함을 느낀다. 또한 운동량이 많지 않고 활동적인 여가를 즐기지 않는다. 
 
식사는 주로 혼자 사무실에서 해결하고 가끔 팀장과 동료들과 같이 먹는다. 잠은 항상 송파구 오륜동에 있는 집에서 잔다. 활동도 주로 사무실에서 혼자 업무를 보는 시간이 많다. 


2. 규칙 기반 분석
특정 규칙에 대한 정보를 탐색하기 위한 함수를 각각 SNmanger의 method로 구현하였다. 각 함수의 알고리즘은 몇 가지 공통적인 과정을 거치는데 이는 다음과 같다.
1.	특정 행동에 대한 한 가지 정보
탐색하고자 하는 gss 노드의 children_list 전체를 대상으로 분석한다. 각 child 노드는 어떤 행동의 start_time이므로 이 노드의 getChildByAttr 메소드를 사용하여 얻고자 하는 정보를 가져온다.
2.	특정 행동 직후의 행동에 대한 정보
마찬가지로 특정 행동을 포함하는 gss 노드의 children_list에서 각 child의 children_list 중 end_time과 child의 start_time가 같을 때 해당 start_time을 value로 갖는 노드를 특정 행동 직후의 행동이라고 간주한다. 
3.	특정 행동의 지속 시간
Gss 노드의 children_list의 start_time과 start_time의 children_list에서 찾은 end_time의 차를 구하여 저장한다.
4.	통계 처리
행동들에 대해 필요한 정보를 모두 저장한 리스트의 원소들을 특정 인덱스로 분류하여 인덱스별 개수를 저장한다. 예를 들어, 모든 기상 직후의 감정을 저장하는 리스트의 원소들을 ‘매우 부정’, ‘부정’, ‘보통’, ‘긍정’, ‘매우 긍정’ 으로 나누어 각각의 개수를 센다. 이를 통해 전체 인덱스 중 특정 인덱스가 차지하는 비율을 계산해낼 수 있다.
5.	점수 평가 시스템
어떤 규칙에 대한 단발적인 정보 탐색 뿐만 아니라 결과를 바탕으로 수면, 식사, 활동에서 어느 유형에 속할 가능성이 높은 지 평가하기 위해 규칙마다 유형별 점수를 부여하였다. 이 점수는 규칙들을 거치며 합산되어 최종적으로 이 사람이 수면, 식사, 활동에서 각각 어느 유형을 보이는지 판단할 수 있는 근거로 활용할 수 있게 하였다. 

한 가지 예시로 수면과 관련된 규칙 중 하나인 ‘기상 직후 느끼는 감정’을 구하는 코드는 다음과 같다.
 
위 코드(SNmanger.js에 포함됨)에서는 수면 시간의 end_time과 일치하는 start_time을 가지는 활동을 찾아 해당 활동에서의 emotion을 모두 찾았다.
 
위 코드(main.html에 포함됨)에서는 기상 직후 emotion을 ‘매우 부정’, ‘부정’, ‘보통’, ‘긍정’, ‘매우 긍정’의 인덱스로 분류하여 각 인덱스에 해당되는 개수를 저장하였다. 전체 횟수 중 특정 인덱스의 횟수 비율을 점수에 반영하여 이 사람이 어느 유형에 속하는지 판단할 수 있는 근거를 마련하였다.
1) 수면 관련 규칙
규칙 내용	유형	획득 정보	정보 분석
기상 직후의 감정 상태	아침형	‘매우 긍정’, ‘긍정’의 비율이 50% 이상	아침에 기상 시 상쾌함을 느끼는 경향이 있다.
	저녁형	‘매우 부정’, ‘부정의 비율이 50% 이상	아침에 일찍 기상해야 하는 현대인의 생활 패턴에 저녁형 인간은 잘 맞지 않는다
	불면증	‘매우 부정’, ‘부정의 비율이 50% 이상	수면이 만족스럽지 못해 기상 시 불쾌한 감정을 느끼는 경향이 있다.
피로도가 가장 낮은 시간대	아침형	‘5~8시’, ‘8~10시’에 피로도가 낮다.	아침에 활동성이 강해지며 체감하는 피로도가 낮다.
	저녁형	‘17~20시’, ‘20~5시’에 피로도가 낮다.	초저녁에 가장 낮은 피로도를 느끼는 경향을 보인다.
잠들기 직전 1시간 이내에 스마트폰을 15분 이상 사용하는 빈도	불면증	스마트폰을 사용하는 빈도가 50% 이상이다.	잠들기 직전 스마트폰 사용은 시각 신경을 자극하여 수면의 질을 떨어뜨리는 경향이 있다.
수면 시간이 4시간 이내인 빈도	불면증	수면 중간에 깨는 비율이 30% 이상이다.	불면증 증세를 보이는 사람은 잠이 쉽게 들지 못할 뿐만 아니라 자주 깨는 특성이 있다.
수면 시작 시간 분포	아침형	‘6~9시’의 비율이 30% 이상이다.	수면 시작, 종료 시간이 비교적 이르다.
	저녁형	‘12~3시’의 비율이 50% 이상이다.	수면 시작, 종료 시간이 비교적 늦다.
	불면증	‘3~6시’의 비율이 30% 이상이다.	늦은 시간까지 잠에 쉽게 들지 못하는 경향이 있다.
하루에 수면을 하는 횟수	불면증	‘4회 이상’의 비율이 30% 이상이다.	밤에 수면을 제대로 취하지 못하면 이를 보충하기 위해 낮잠을 자주 자는 경향을 보인다.

2) 식사 관련 규칙
규칙 내용	유형	획득 정보	정보 분석
오후 7시 이후에 음식을 섭취하는 비율	야식증	오후 7시 이후에 음식을 섭취하는 비율이 70% 이상이다.	저녁 식사 시간 이후에 음식을 섭취하는 비율이 높으며, 현대인은 업무 등의 이유로 늦은 시간에 과식하는 비율이 높다.
식사 직후 느끼는 감정 분포	거식증	‘매우 부정’, ‘부정’의 비율이 50% 이상이다.	외모에 대한 불안으로 인해 식사에 대한 죄책감을 느끼며 종종 고의적인 구토를 하기도 한다.
	폭식증	‘매우 부정’, ‘부정’의 비율이 50% 이상이다.	한번에 많은 양의 음식을 섭취하고 이를 후회한다. 아침, 점심이 부실한 사람은 주로 저녁에 과식을 하는 경향이 있다.
하루 중 식사 활동의 주기	폭식증	식사 간 간격이 ‘0~3시간’인 비율이 50% 이상이다.	폭식증을 겪는 사람은 식사의 주기가 짧은 경향을 보인다.
배가 고프지 않을 때 식사를 한 횟수	폭식증	전체 식사 중 배가 고프지 않았던 비율은 30% 이상이다.	폭식증을 겪는 사람은 배가 고프지 않아도 억지로 식사를 하는 경향이 있다.

3) 활동 관련 규칙
규칙 내용	유형	획득 정보	정보 분석
만나는 사람의 다양성	내향	‘혼자’의 비율이 70% 이상이다.	대부분의 활동을 혼자 한다.
	외향	‘혼자’의 비율이 50% 이하이다.	다양한 사람과 활동하는 것을 선호한다.
혼자 밥을 먹는 비율	내향	‘혼자’의 비율이 70% 이상이다.	혼자 식사하는 것을 선호한다.
	외향	‘혼자’의 비율이 30% 이하이다.	식사를 할 때도 다양한 사람들과 하는 경향이 있다.
실내/실외에 따른 감정 분포	실내	실내에서 ‘매우 긍정’, ‘긍정’의 비율이 30% 이상이다.	실내를 선호하여 실외에서 느끼는 감정이 부정적인 경향이 있다.
	실외	실외에서 ‘매우 긍정’, ‘긍정’의 비율이 30% 이상이다.	직업에 따라 일과시간은 어쩔 수 없이 실내에서 보내는 경우가 있으나 실외에서 여가시간을 보낼 때 긍정적인 감정을 느끼는 경향이 있다.
3. 그래프 기반 분석
가독성을 위해 전체 그래프에서 서브그래프를 표시하지 않고 각 서브그래프를 새로운 네트워크로 생성하였다. 기존 데이터에서 필요한 정보만 노드로 등록하여 직관적으로 정보를 확인할 수 있도록 하였다.
한 가지 예시로, ‘기상 직후 부정적인 감정을 자주 느낀다’ 라는 특징을 서브그래프로 구현하기 위한 코드는 다음과 같다.
 
위 코드(main.html에 포함됨)에서는 기존 네트워크의 root와 gss[‘food’]를 가져와 모든 식사 중 부정적인 감정을 보인 경우를 노드로 포함하는 그래프를 생성한다. 이 때, 같은 감정을 갖는 노드끼리 묶어 보다 직관적으로 볼 수 있게 하였다.

1) 수면 관련 서브 그래프
1. 기상 직후 느끼는 감정이 주로 부정적이다.
 
Sleep의 end_time과 start_time이 동일한 활동에 ‘매우 부정’, ‘부정’의 emotion이 많이 연결되어 있다.

2) 식사 관련 서브 그래프
1.	식사를 할 때 주로 부정적인 감정을 느낀다.
 
식사의 start_time과 ‘매우 부정’, ‘부정’의 emotion이 많이 연결되어 있다.
2.	오후 7시 이후에 음식을 자주 섭취한다.
 
오후 7시 이후가 red, 이전이 yellow 노드이다. 오후 7시 이후에 음식을 종종 섭취한다.

3) 활동 관련 서브 그래프
    1. 혼자 밥을 먹는 비율
 
혼자가 red, 그 외 사람들이 yellow 노드이다. 혼자 밥을 먹는 비율이 종종 있다.
4.	규칙, 그래프 기반 분석
1.	수면
(1)	기상 직후의 감정
규칙: 기상 직후의 감정이 부정적인 사람은 불면증을 앓고 있거나 저녁형 인간일 가능성이 높다.
서브그래프: 기상 직후의 활동에서 부정적인 감정이 많이 관찰되었다.
결론: 위 사람은 불면증을 앓고 있거나 저녁형 인간임에도 아침 일찍 출근해야 하는 직장인이기에 기상 직후 피로감과 부정적인 감정을 갖는 것으로 보인다.

2.	식사
(1)	식사와 감정
규칙: 거식증 및 폭식증을 앓는 사람은 식사를 한 직후 부정적인 감정을 느낀다.
서브그래프: 식사 중에 부정적인 감정을 느끼는 경우가 많다.
결론: 위 사람은 식사 중 및 직후에 부정적인 감정을 느끼는 것으로 미루어 볼 때 거식증이나 폭식증을 앓고 있을 가능성이 높다. 
(2)	늦은 시간의 음식 섭취
규칙: 야식증을 앓는 사람은 저녁 식사 시간 이후 음식을 섭취하는 비율이 높다.
서브그래프: 오후 7시 이후에 음식을 자주 섭취하였다.
결론: 아침을 자주 거르고, 점심을 부실하게 해결하는 직장인의 특성 상 저녁에 과식을 하는 경향을 보인다. 또한 늦은 퇴근 시간 등으로 인하여 오후 7시 이후에 음식을 자주 섭취한다.

3.	활동
(1)	혼자 식사
규칙: 혼자 식사하는 비율이 높을수록 내향적인 성격일 가능성이 높다.
서브그래프: 혼자 식사하는 경우가 많지 않다.
결론: 다양한 사람들과 

5.	참고문헌
Psychometric Properties and Item Evaluation of Korean Version of Night Eating Questionaaire (김범종 임인자 최희정)
On the Internet No One Knows I'm an Introvert: Extroversion, Neuroticism, and Internet Interaction (Tair Amichai-Hamburger, Galit WainapelShaul Fox)
Sleep Wake Patterns and Nocturnal Sleep Parameters in the Morening and Evening Tyoes (정광호 김성재 이세용 이정희)
Personality and the Internet (Yair Amichai-Hamburger, Bar-Ilan University, Ramat-Gan, Israel)
Comprehensive Evaluation and Approach to the Patient with insomnia (Hyung-Yung Lee, M.D)
